{"questionTitle": "Can&#39;t compare naive and aware datetime.now() &lt;= challenge.datetime_end", "question": "<p>I am trying to compare the current date and time with dates and times specified in models using comparison operators:</p>\n<pre><code>if challenge.datetime_start &lt;= datetime.now() &lt;= challenge.datetime_end:\n</code></pre>\n<p>The script errors out with:</p>\n<pre class=\"lang-none prettyprint-override\"><code>TypeError: can't compare offset-naive and offset-aware datetimes\n</code></pre>\n<p>The models look like this:</p>\n<pre><code>class Fundraising_Challenge(models.Model):\n    name = models.CharField(max_length=100)\n    datetime_start = models.DateTimeField()\n    datetime_end = models.DateTimeField()\n</code></pre>\n<p>I also have django using locale date and times.</p>\n<p>What I haven't been able to find is the format django uses for DateTimeField().  Is it naive or aware?  And how do I get datetime.now() to recognize locale datetime?</p>\n", "acceptedAnswer": "<p>By default, the <code>datetime</code> object is <code>naive</code> in Python, so you need to make both of them either naive or aware <code>datetime</code> objects. This can be done using:</p>\n\n<pre><code>import datetime\nimport pytz\n\nutc=pytz.UTC\n\nchallenge.datetime_start = utc.localize(challenge.datetime_start) \nchallenge.datetime_end = utc.localize(challenge.datetime_end) \n# now both the datetime objects are aware, and you can compare them\n</code></pre>\n\n<p>Note: This would raise a <code>ValueError</code> if <code>tzinfo</code> is already set. If you are not sure about that, just use</p>\n\n<pre><code>start_time = challenge.datetime_start.replace(tzinfo=utc)\nend_time = challenge.datetime_end.replace(tzinfo=utc)\n</code></pre>\n\n<p>BTW, you could format a UNIX timestamp in datetime.datetime object with timezone info as following</p>\n\n<pre><code>d = datetime.datetime.utcfromtimestamp(int(unix_timestamp))\nd_with_tz = datetime.datetime(\n    year=d.year,\n    month=d.month,\n    day=d.day,\n    hour=d.hour,\n    minute=d.minute,\n    second=d.second,\n    tzinfo=pytz.UTC)\n</code></pre>\n", "questionSource": "https://stackoverflow.com/questions/15307623/cant-compare-naive-and-aware-datetime-now-challenge-datetime-end"}