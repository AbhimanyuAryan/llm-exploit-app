{"questionTitle": "Why are C++ STL iostreams not &quot;exception friendly&quot;?", "question": "<p>I'm used to the Delphi VCL Framework, where TStreams throw exceptions on errors (e.g file not found, disk full). I'm porting some code to use C++ STL instead, and have been caught out by iostreams NOT throwing exceptions by default, but setting <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/iostate\" rel=\"noreferrer\">badbit/failbit flags</a> instead.</p>\n\n<p>Two questions...</p>\n\n<p>a: Why is this - It seems an odd design decision for a language built with exceptions in it from day one?</p>\n\n<p>b: How best to avoid this? I could produce shim classes that throw as I would expect, but this feels like reinventing the wheel. Maybe there's a BOOST library that does this in a saner fashion?</p>\n", "acceptedAnswer": "<ol>\n<li><p>C++ wasn't built with exceptions from day one. &quot;C with classes&quot; started in 1979, and exceptions were added in 1989. Meanwhile, the <code>streams</code> library was written as early as 1984 (later becomes <code>iostreams</code> in 1989 (later reimplemented by GNU in 1991)), it just cannot use exception handling in the beginning.</p>\n<p>Ref:</p>\n<ul>\n<li><a href=\"//www.stroustrup.com/hopl2.pdf\" rel=\"noreferrer\">Bjarne Stroustrup, <em>A History of C++: 1979\u22121991</em></a></li>\n<li><a href=\"http://www.softwarepreservation.org/projects/c_plus_plus/library\" rel=\"noreferrer\">C++ Libraries</a></li>\n</ul>\n</li>\n<li><p>You <em>can</em> enable exceptions with <a href=\"//en.cppreference.com/w/cpp/io/basic_ios/exceptions\" rel=\"noreferrer\">the <code>.exceptions</code> method</a>.</p>\n</li>\n</ol>\n<pre><code>// ios::exceptions\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nint main () {\n    std::ifstream file;\n    file.exceptions(ifstream::failbit | ifstream::badbit);\n    try {\n        file.open (&quot;test.txt&quot;);\n        std::string buf;\n        while (std::getline(file, buf))\n            std::cout &lt;&lt; &quot;Read&gt; &quot; &lt;&lt; buf &lt;&lt; &quot;\\n&quot;;\n    }\n    catch (ifstream::failure&amp; e) {\n        std::cout &lt;&lt; &quot;Exception opening/reading file\\n&quot;;\n    }\n}\n</code></pre>\n", "questionSource": "https://stackoverflow.com/questions/3180268/why-are-c-stl-iostreams-not-exception-friendly"}