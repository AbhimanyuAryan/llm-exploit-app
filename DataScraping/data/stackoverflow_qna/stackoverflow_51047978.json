{"questionTitle": "CMake could not find JNI", "question": "<p>I created a new Android Studio Project with C++ support and did not add anything to it. The project builds, compiles and runs with CMake. I then added the following two lines of code to <code>CMakeLists.txt</code> at the bottom of the file and I get a CMake build error.</p>\n\n<pre><code>find_package(Java COMPONENTS Development)       # Line 47\nfind_package(JNI REQUIRED)                      # Line 48\n</code></pre>\n\n<p>And this is the error I get when building the project</p>\n\n<pre><code>-- Found Java: /usr/lib/jvm/java-10-oracle/bin/java (found version \"10.0.1\") found components:  Development \n-- Configuring incomplete, errors occurred!\nCMake Error at /home/xxxxx/Android/Sdk/cmake/3.6.4111459/share/cmake-3.6/Modules/FindPackageHandleStandardArgs.cmake:148 (message):\n  Could NOT find JNI (missing: JAVA_AWT_LIBRARY JAVA_JVM_LIBRARY\nSee also \"/home/xxxxx/AndroidStudioProjects/MyApplication/app/.externalNativeBuild/cmake/release/x86_64/CMakeFiles/CMakeOutput.log\".\n  JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH)\nCall Stack (most recent call first):\n  /home/xxxxxx/Android/Sdk/cmake/3.6.4111459/share/cmake-3.6/Modules/FindPackageHandleStandardArgs.cmake:388 (_FPHSA_FAILURE_MESSAGE)\n  /home/xxxxxx/Android/Sdk/cmake/3.6.4111459/share/cmake-3.6/Modules/FindJNI.cmake:314 (FIND_PACKAGE_HANDLE_STANDARD_ARGS)\n  CMakeLists.txt:48 (find_package)\nExternal native generate JSON release: JSON generation completed with problems\n</code></pre>\n\n<p>CMake runs when being called form the command line, but fails inside Android Studio for some reason and I am not sure why. </p>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>Here is the <a href=\"https://pastebin.com/vZXfkPya\" rel=\"noreferrer\">CMakeOutput.log</a> file </p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>This is all that is in <code>CMakeLists.txt</code> file. It compiles in cmd with the command cmake.</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\n\nfind_package(Java COMPONENTS Development)\nfind_package(JNI REQUIRED)\n</code></pre>\n\n<p>This is the cmd output</p>\n\n<pre><code>    E:\\Users\\xxxxx\\AndroidStudioProjects\\MyApplication\\app\\build&gt;cmake ..\n-- Configuring done\n-- Generating done\n-- Build files have been written to: E:/Users/xxxxx/AndroidStudioProjects/MyApplication/app/build\n</code></pre>\n\n<p>When I try to add it compile it in Android Studio using gradle I get the following error on Windows 10 pro 64 bit</p>\n\n<pre><code>Microsoft Windows [Version 10.0.17134.112]\n(c) 2018 Microsoft Corporation. All rights reserved.\n\nE:\\Users\\xxxxx\\AndroidStudioProjects\\MyApplication&gt;gradlew build --stacktrace\n\n&gt; Task :app:generateJsonModelDebug \nExternal native generate JSON debug: starting JSON generation\nExternal native generate JSON debug: using platform version 24 for ABI ARMEABI_V7A and min SDK version 24\nExternal native generate JSON debug: noticing that build file 'E:\\Users\\xxxxx\\AndroidStudioProjects\\MyApplication\\app\\CMakeLists.txt' is out of date with respect to E:\\Users\\xxxxx\\AndroidStudioProjects\\MyApplication\\app\\.extern\nalNativeBuild\\cmake\\debug\\armeabi-v7a\\android_gradle_build.json\nExternal native generate JSON debug: rebuilding JSON E:\\Users\\xxxxx\\AndroidStudioProjects\\MyApplication\\app\\.externalNativeBuild\\cmake\\debug\\armeabi-v7a\\android_gradle_build.json due to:\nExternal native generate JSON debug: - a dependent build file changed\nExternal native generate JSON debug: keeping json folder 'E:\\Users\\xxxxx\\AndroidStudioProjects\\MyApplication\\app\\.externalNativeBuild\\cmake\\debug\\armeabi-v7a' but regenerating project\nExternal native generate JSON debug: executing cmake Executable : E:\\Android\\SDK\\cmake\\3.6.4111459\\bin\\cmake.exe\narguments :\n-HE:\\Users\\xxxxx\\AndroidStudioProjects\\MyApplication\\app\n-BE:\\Users\\xxxxx\\AndroidStudioProjects\\MyApplication\\app\\.externalNativeBuild\\cmake\\debug\\armeabi-v7a\n-DANDROID_ABI=armeabi-v7a\n-DANDROID_PLATFORM=android-24\n-DCMAKE_LIBRARY_OUTPUT_DIRECTORY=E:\\Users\\xxxxx\\AndroidStudioProjects\\MyApplication\\app\\build\\intermediates\\cmake\\debug\\obj\\armeabi-v7a\n-DCMAKE_BUILD_TYPE=Debug\n-DANDROID_NDK=E:\\Android\\SDK\\ndk-bundle\n-DCMAKE_CXX_FLAGS=\n-DCMAKE_TOOLCHAIN_FILE=E:\\Android\\SDK\\ndk-bundle\\build\\cmake\\android.toolchain.cmake\n-DCMAKE_MAKE_PROGRAM=E:\\Android\\SDK\\cmake\\3.6.4111459\\bin\\ninja.exe\n-GAndroid Gradle - Ninja\njvmArgs :\n\n\nCMake Error at E:/Android/SDK/cmake/3.6.4111459/share/cmake-3.6/Modules/FindPackageHandleStandardArgs.cmake:148 (message):\n  Could NOT find JNI (missing: JAVA_AWT_LIBRARY JAVA_JVM_LIBRARY\n  JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH)\nCall Stack (most recent call first):\n  E:/Android/SDK/cmake/3.6.4111459/share/cmake-3.6/Modules/FindPackageHandleStandardArgs.cmake:388 (_FPHSA_FAILURE_MESSAGE)\n  E:/Android/SDK/cmake/3.6.4111459/share/cmake-3.6/Modules/FindJNI.cmake:314 (FIND_PACKAGE_HANDLE_STANDARD_ARGS)\n  CMakeLists.txt:4 (find_package)\n-- Configuring incomplete, errors occurred!\nSee also \"E:/Users/xxxxx/AndroidStudioProjects/MyApplication/app/.externalNativeBuild/cmake/debug/armeabi-v7a/CMakeFiles/CMakeOutput.log\".\n</code></pre>\n", "acceptedAnswer": "<pre><code>Could NOT find JNI (missing: JAVA_AWT_LIBRARY JAVA_JVM_LIBRARY\n</code></pre>\n\n<p>Solved with </p>\n\n<pre><code>sudo apt-get install -y openjdk-8-jdk\nsudo apt-get install -y default-jdk\nexport JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\n</code></pre>\n", "questionSource": "https://stackoverflow.com/questions/51047978/cmake-could-not-find-jni"}