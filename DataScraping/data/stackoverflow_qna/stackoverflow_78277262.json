{"questionTitle": "Use condition filter after with() or load() Laravel Eloquent", "question": "<p>Imagine we have a <code>Facture</code> and <code>Item</code> model in a one-to-many relationship. I'm using <code>$facture-&gt;items()</code> or <code>$facture-&gt;load('items')</code> and it works perfectly. However, when I need to use a condition on items like <code>where('items.price', 30)</code>, I have no idea how to do it without <code>DB::</code>. Actually, I tried to use <code>leftJoin()</code>, because it has a condition on the right side of the relation, but this solution couldn't help me.</p>\n", "acceptedAnswer": "<p>Depending on what you want to do, you have different options:</p>\n<ol>\n<li>Query <code>Item</code>'s of price 30 of this <code>Facture</code></li>\n</ol>\n<pre class=\"lang-php prettyprint-override\"><code>$facture-&gt;items()-&gt;where('price', 30);\n</code></pre>\n<ol start=\"2\">\n<li>Load <code>Item</code>'s of price 30 of one or multiple <code>Facture</code>'s</li>\n</ol>\n<pre class=\"lang-php prettyprint-override\"><code>$factures-&gt;load(['items' =&gt; fn ($query) =&gt; $query-&gt;where('price', 30)]);\n</code></pre>\n<ol start=\"3\">\n<li>Load only <code>Facture</code>'s that have at least one <code>Item</code> of price = 30</li>\n</ol>\n<pre class=\"lang-php prettyprint-override\"><code>Facture::query()-&gt;whereHas('items', fn (Builder $query) =&gt; $query-&gt;where('price', 30));\n</code></pre>\n<ol start=\"4\">\n<li>Load only <code>Facture</code>'s that have at least one <code>Item</code> of price = 30, but also load only those items</li>\n</ol>\n<pre class=\"lang-php prettyprint-override\"><code>Facture::query()\n  -&gt;with(['items' =&gt; fn ($query) =&gt; $query-&gt;where('price', 30)])\n  -&gt;whereHas('items', fn (Builder $query) =&gt; $query-&gt;where('price', 30));\n</code></pre>\n", "questionSource": "https://stackoverflow.com/questions/78277262/use-condition-filter-after-with-or-load-laravel-eloquent"}